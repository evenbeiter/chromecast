<!DOCTYPE html>
<html>
<head>
<link rel="icon" type="image/png" href="https://www3.nhk.or.jp/news/parts16/images/favicon/apple-touch-icon-180x180-precomposed.png">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
<title>NHKニュース</title>
<script type="text/javascript" src="https://www.gstatic.com/cv/js/sender/v1/cast_sender.js?loadCastFramework=1"></script>
<style>
</style>
</head>
<body>
<cast-media-player id="media-player"></cast-media-player>
<div id="wrapper" class="position-fixed w-100 top-0 start-0" style="height:100vh;display:none">
  <google-cast-launcher id="cast-button" class="position-absolute top-50 start-50 translate-middle" style="z-index:1030;width:10rem;height:10rem"></google-cast-launcher>
</div>

  
  <script>
    window['__onGCastApiAvailable'] = function(isAvailable) {
      if (isAvailable) {
        const context = cast.framework.CastContext.getInstance();
        context.setOptions({
          receiverApplicationId: chrome.cast.media.DEFAULT_MEDIA_RECEIVER_APP_ID,
          autoJoinPolicy: chrome.cast.AutoJoinPolicy.ORIGIN_SCOPED
        }); 
        alert('available');
      }
    };

    async function castVideo() {
      const context = cast.framework.CastContext.getInstance();
      const session = await context.requestSession();
      const mediaInfo = new chrome.cast.media.MediaInfo("https://www3.nhk.or.jp/nhkworld/common/player/tv/premiumlive/embed/embed.html", "video/mp4");
      const request = new chrome.cast.media.LoadRequest(mediaInfo);
      session.loadMedia(request);
    }

    document.getElementById('cast-button').addEventListener('click', castVideo);
  </script>
</body>
</html>
