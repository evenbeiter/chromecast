<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chromecast 投放</title>
    <script src="https://www.gstatic.com/cv/js/sender/v1/cast_sender.js?loadCastFramework=1"></script>
    <script>
        window.__onGCastApiAvailable = function(isAvailable) {
            if (isAvailable) {
                initializeCastApi();
            }
        };

        function initializeCastApi() {
            const context = cast.framework.CastContext.getInstance();
            context.setOptions({
                receiverApplicationId: chrome.cast.media.DEFAULT_MEDIA_RECEIVER_APP_ID
            });
        }

        function castVideo() {
            const context = cast.framework.CastContext.getInstance();
            const session = context.getCurrentSession();
            if (session) {
                const mediaInfo = new chrome.cast.media.MediaInfo("https://www3.nhk.or.jp/nhkworld/common/player/tv/premiumlive/embed/embed.html", "video/mp4");
                const request = new chrome.cast.media.LoadRequest(mediaInfo);
                session.loadMedia(request).then(
                    () => console.log("投放成功"),
                    (error) => console.error("投放失敗", error)
                );
            } else {
                console.error("未找到 Chromecast 裝置");
            }
        }
    </script>
</head>
<body>
    <h1>Chromecast 投放範例</h1>
    <button id="castButton" onclick="castVideo()">
        <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/8/8f/Google_Cast_logo.svg/120px-Google_Cast_logo.svg.png" 
             alt="投放" width="40">
    </button>
</body>
</html>